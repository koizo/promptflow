# PromptFlow - AI Inference Platform

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Python 3.11+](https://img.shields.io/badge/python-3.11+-blue.svg)](https://www.python.org/downloads/)
[![Docker](https://img.shields.io/badge/docker-%230db7ed.svg?style=flat&logo=docker&logoColor=white)](https://www.docker.com/)

Build powerful AI workflows with simple YAML configuration. Combine OCR, speech transcription, sentiment analysis, image classification, and LLM processing through reusable executors that auto-generate REST APIs.

## 🔬 Case Study: Amazon Q Developer Analysis

This project was built as a case study for Amazon Q Developer analysis. While all code was generated by Amazon Q Developer, strict rules, PRDs, and high levels of hand-holding were required to achieve this level of functionality.

## 🚀 Quick Start

```bash
# Clone and start the platform
git clone <repository>
cd promptflow
docker-compose up -d

# Access the platform
# API Docs: http://localhost:8000/docs
# Flow Catalog: http://localhost:8000/catalog
```

## ✨ Key Features

- **🔧 YAML-Driven Workflows** - Define complex AI pipelines with simple configuration
- **🚀 Auto-Generated APIs** - REST endpoints created automatically from flow definitions
- **⚡ Async Processing** - Scalable Celery-based task processing for production
- **🎯 Multi-Modal Support** - Process documents, images, audio, and text
- **📊 Real-Time Monitoring** - Track execution progress and performance metrics

## 🧪 BETA Features

### 🤖 AI Flow Generator
**Generate YAML workflows from natural language descriptions using LLM**

Transform plain English descriptions into production-ready AI workflows automatically. The Flow Generator understands your requirements and creates complete YAML flow definitions with proper executors, configurations, and response formatting.

This feature is in active development. Generated flows may require manual refinement for complex use cases. We're continuously improving the LLM prompts and validation logic.

**[📖 Complete Flow Generator Documentation](documentation/flows/flow-generator.md)**

```bash
# Generate a flow from natural language
cli/generate_flow.sh "Extract text from PDF and analyze sentiment"

# Interactive mode with clarifying questions
cli/generate_flow.sh --interactive "Process customer feedback documents"

# Preview without saving
cli/generate_flow.sh --preview-only "OCR an image and summarize the text"
```

## 🏗️ Architecture

```
YAML Flow → Flow Engine → AI Executors → Auto-Generated REST API
```

The platform orchestrates **AI Executors** (reusable components) through **YAML Flows** to automatically generate production-ready APIs.

## 🤖 AI Capabilities

### 📄 OCR Processing
Extract text from images and documents with multi-language support and high accuracy.

**[📖 Full Documentation](documentation/ai-capabilities/ocr-processing.md)**

```bash
curl -X POST "http://localhost:8000/api/v1/ocr-analysis/execute" \
  -F "file=@document.png" -F "languages=en,es"
```

### 🎤 Speech Transcription
Convert audio to text with multiple provider support (Local Whisper, OpenAI, HuggingFace).

**[📖 Full Documentation](documentation/ai-capabilities/speech-transcription.md)**

```bash
curl -X POST "http://localhost:8000/api/v1/speech-transcription/execute" \
  -F "file=@audio.mp3" -F "provider=local" -F "model_size=base"
```

### 💭 Sentiment Analysis
Analyze text sentiment with emotion detection, aspect-based analysis, and confidence scoring.

**[📖 Full Documentation](documentation/ai-capabilities/sentiment-analysis.md)**

```bash
curl -X POST "http://localhost:8000/api/v1/sentiment-analysis/execute" \
  -H "Content-Type: application/json" \
  -d '{"text": "I love this product!", "analysis_type": "comprehensive"}'
```

### 🖼️ Image Classification
Classify images using multiple model architectures with high accuracy and fast processing.

**[📖 Full Documentation](documentation/ai-capabilities/image-classification.md)**

```bash
curl -X POST "http://localhost:8000/api/v1/image-classification/execute" \
  -F "file=@image.jpg" -F "provider=huggingface" -F "top_k=5"
```

### 🧠 LLM Analysis
Advanced text analysis using Large Language Models with custom prompts and intelligent processing.

**[📖 Full Documentation](documentation/ai-capabilities/llm-analysis.md)**

```bash
curl -X POST "http://localhost:8000/api/v1/document-analysis/execute" \
  -F "file=@document.pdf" \
  -F "analysis_prompt=Summarize key points and provide recommendations"
```

## 📝 Creating Flows

Define AI workflows using simple YAML configuration:

```yaml
name: "document_analysis"
description: "Extract and analyze text from documents"

inputs:
  - name: "file"
    type: "file"
    required: true

steps:
  - name: "extract_text"
    executor: "ocr_processor"
    config:
      image_path: "{{ inputs.file }}"
      languages: ["en"]
      
  - name: "analyze_sentiment"
    executor: "sentiment_analyzer"
    config:
      text: "{{ steps.extract_text.text }}"
      analysis_type: "comprehensive"

config:
  execution:
    mode: "async"
    timeout: 300
```

**[📖 Complete YAML Configuration Guide](documentation/flows/yaml-configuration.md)**

## 🔧 Extending the Platform

Create custom AI executors to add new capabilities:

```python
from core.executors.base_executor import BaseExecutor, ExecutionResult

class MyCustomExecutor(BaseExecutor):
    async def execute(self, context, config):
        # Your AI processing logic here
        result = await self.process_data(config.get("input"))
        return ExecutionResult(success=True, outputs={"result": result})
```

**[📖 Complete Executor Development Guide](documentation/executors/creating-executors.md)**

## 📚 Documentation

### For Users
- **[📖 Complete Documentation](documentation/README.md)** - Full platform documentation
- **[🔧 YAML Configuration](documentation/flows/yaml-configuration.md)** - Create and configure flows
- **[🤖 AI Capabilities](documentation/ai-capabilities/)** - Detailed guides for each AI feature

### For Developers
- **[⚙️ Creating Executors](documentation/executors/creating-executors.md)** - Build custom AI capabilities
- **[🏗️ Architecture Guide](documentation/architecture.md)** - Platform architecture and system design
- **[🧪 Testing Guide](documentation/executors/creating-executors.md#testing-your-executor)** - Test your implementations

## 🚀 Performance

| Feature | Speed | Accuracy | Use Case |
|---------|-------|----------|----------|
| **OCR Processing** | 2-5s | 95-99% | Document digitization |
| **Speech Transcription** | 0.1-5s | 95-99% | Audio to text conversion |
| **Sentiment Analysis** | 0.02-5s | 95-99% | Text emotion analysis |
| **Image Classification** | 0.1-5s | 95-99% | Visual content analysis |
| **LLM Analysis** | 2-10s | Context-aware | Advanced text understanding |

## 🏭 Production Ready

### Execution Modes
- **Asynchronous** (Production) - Non-blocking, scalable processing with Celery workers
- **Synchronous** (Development) - Immediate results for testing and debugging

### Container Architecture
```yaml
services:
  app:              # FastAPI application
  redis:            # State management
  celery-worker-*:  # Specialized AI processing workers
  celery-flower:    # Worker monitoring dashboard
```

### Monitoring & Observability
- Real-time execution tracking via Redis
- Performance metrics and logging
- Worker health monitoring with Flower
- Comprehensive error handling and reporting

## 🧪 Testing

```bash
# Health check
curl http://localhost:8000/health

# API documentation
open http://localhost:8000/docs

# Flow catalog
curl http://localhost:8000/catalog

# Run tests
pytest tests/ -v
```

## 📁 Project Structure

```
promptflow/
├── core/
│   ├── executors/          # AI processing components
│   ├── flow_engine/        # Workflow orchestration
│   └── schema.py          # Data models and validation
├── flows/                 # YAML flow definitions
├── documentation/         # Comprehensive documentation
├── tests/                 # Test suite
├── main.py               # FastAPI application
├── celery_app.py         # Async task processing
└── docker-compose.yml    # Container orchestration
```

## 🎯 Use Cases

- **Document Processing** - Extract and analyze text from PDFs, images, and scanned documents
- **Content Moderation** - Analyze text and images for sentiment, toxicity, and compliance
- **Media Analysis** - Transcribe audio, classify images, and extract insights
- **Business Intelligence** - Process customer feedback, reviews, and social media content
- **Accessibility** - Convert audio to text and images to descriptions

## 🤝 Contributing

We welcome contributions! See our [documentation](documentation/README.md) for:
- Adding new AI capabilities
- Improving existing executors
- Creating example flows
- Enhancing documentation

## 📄 License

MIT License - see [LICENSE](LICENSE) file for details.

---

**[📖 View Complete Documentation](documentation/README.md)** | **[🚀 Get Started](documentation/README.md#quick-start)** | **[🤖 AI Capabilities](documentation/ai-capabilities/)** | **[🔧 Create Flows](documentation/flows/yaml-configuration.md)** | **[🧪 Flow Generator](cli/generate_flow.sh)**